(this["webpackJsonpdungeon-crawler"]=this["webpackJsonpdungeon-crawler"]||[]).push([[0],{11:function(t,e,a){t.exports=a(21)},16:function(t,e,a){},17:function(t,e,a){t.exports=a.p+"static/media/logo.25bf045c.svg"},18:function(t,e,a){},21:function(t,e,a){"use strict";a.r(e);var r=a(0),o=a.n(r),n=a(8),s=a.n(n),p=(a(16),a(1)),i=a(2),c=a(4),l=a(3),h=a(5),u=(a(17),a(18),a(9)),m={squareSize:40};Object(u.a)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"KEYDOWN":case"NEWMAP":case"":break;default:return t}return console.log("reducer",t,e),t}));var f=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,a=[],r=0;r<t;r++)a.push(new Array(e).fill("grass"));function o(r,o,n){return r<0||o<0||r>=t||o>=e?0:"grass"===a[r][o]&&Math.floor(Math.random()*n)<10&&(a[r][o]="rock",!0)}function n(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;o(t-1,e,a)&&n(t-1,e,a+20),o(t+1,e,a)&&n(t+1,e,a+20),o(t,e-1,a)&&n(t,e-1,a+20),o(t,e+1,a)&&n(t,e+1,a+20)}for(var s=0;s<t;s++)for(var p=0;p<e;p++)0===Math.floor(40*Math.random())&&(a[s][p]="rock",n(s,p));return a},g=function(t){function e(){var t;return Object(p.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).call(this))).state={},t}return Object(h.a)(e,t),Object(i.a)(e,[{key:"render",value:function(){return o.a.createElement("div",{className:"app"},o.a.createElement(b,{mapW:20,mapH:20}))}}]),e}(o.a.Component),b=function(t){function e(t){var a;Object(p.a)(this,e),(a=Object(c.a)(this,Object(l.a)(e).call(this,t))).handleKeyDown=function(t){var e=a.state.playerX,r=a.state.playerY;switch(t.key){case"ArrowLeft":e>0&&e--;break;case"ArrowUp":r>0&&r--;break;case"ArrowRight":e<a.props.mapW-1&&e++;break;case"ArrowDown":r<a.props.mapH-1&&r++;break;default:return 0}if("rock"!=a.state.map[r][e]){var o=a.state.viewRange,n={left:e-o,top:r-o,right:e+o,bottom:r+o};a.props.mapW>2*o+1?(n.left<0&&(n.right=2*o,n.left=0),n.right>a.props.mapW-1&&(n.right=a.props.mapW-1,n.left=n.right-2*o)):(n.left=0,n.right=a.props.mapW-1),a.props.mapH>2*o+1?(n.top<0&&(n.bottom=2*o,n.top=0),n.bottom>a.props.mapH-1&&(n.bottom=a.props.mapH-1,n.top=n.bottom-2*o)):(n.top=0,n.bottom=a.props.mapH-1);for(var s=a.state.map,p=[],i=n.top;i<=n.bottom;i++)p.push(s[i].slice(n.left,n.right+1));p[r-n.top][e-n.left]="player",a.setState({playerX:e,playerY:r,shownMap:p})}};for(var r=Math.floor(a.props.mapW/2),o=Math.floor(a.props.mapH/2),n={left:r<4?0:r-4,top:o<4?0:o-4,right:r>a.props.mapW-4-1?a.props.mapW-1:r+4,bottom:o>a.props.mapH-4-1?a.props.mapH-1:o+4},s=f(a.props.mapH,a.props.mapW),i=[],h=n.top;h<=n.bottom;h++)i.push(s[h].slice(n.left,n.right+1));return i[o-n.top][r-n.left]="player",a.state={map:s,shownMap:i,squareSize:40,viewRange:4,playerX:r,playerY:o},a}return Object(h.a)(e,t),Object(i.a)(e,[{key:"render",value:function(){for(var t=this.state.shownMap.slice(),e=[],a={height:this.state.squareSize+"px",width:this.state.squareSize+"px"},r=0;r<t.length;r++)for(var n=0;n<t[r].length;n++)e.push(o.a.createElement(v,{type:t[r][n],style:a,key:r+" "+n}));var s={gridTemplateColumns:"repeat("+t[0].length+", "+(this.state.squareSize+2)+"px)",width:t[0].length*(this.state.squareSize+2)+"px",height:t.length*(this.state.squareSize+2)+"px"};return o.a.createElement("div",{className:"gameBoard",style:s,tabIndex:"0",onKeyDown:this.handleKeyDown},e)}}]),e}(o.a.Component),v=function(t){function e(t){var a;return Object(p.a)(this,e),(a=Object(c.a)(this,Object(l.a)(e).call(this,t))).state={type:a.props.type},a}return Object(h.a)(e,t),Object(i.a)(e,[{key:"componentWillReceiveProps",value:function(t){this.setState({type:t.type})}},{key:"render",value:function(){var t;switch(this.state.type){case"ground":t="#9c7711";break;case"grass":t="#7ec850";break;case"rock":t="#5c4e29";break;case"player":t="#4287f5";break;default:t="#000000"}var e=this.props.style;return e={height:this.props.style.height,background:t},o.a.createElement("div",{className:"square",style:e})}}]),e}(o.a.Component),d=g;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(d,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[11,1,2]]]);
//# sourceMappingURL=main.91023785.chunk.js.map